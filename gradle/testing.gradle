apply from: "$rootDir/gradle/dependencies.gradle"
apply plugin: "java"

dependencies {
    testCompile libraries["junit"]

    // TODO: Add an slf4j binding ("slf4j-jdk14") if none is present, but only if "slf4j-api" is declared.
}

tasks.withType(Test) {
    // Disable tests globally for now.
    // For subprojects that are okay to test, re-enable their individual test tasks in their build scripts.
    setEnabled false

    if (!System.env.'TRAVIS') {
        ignoreFailures true
    }

    // rootTestReport will include the results of this test.
    // Parent projects are evaluated before their children, so this should be available.
    rootProject.rootTestReport.reportOn it

    // Generate a root report if there are any subproject reports.
    finalizedBy rootProject.rootTestReport
}
