apply from: "$rootDir/gradle/integTesting.gradle"

dependencies {
    testCompile project(":cdm")
    testRuntime project(":clcommon")
    testRuntime project(":grib")
    testCompile project(":httpservices")
    testRuntime project(":opendap")
    testRuntime project(":visad")
    testCompile project(path: ':cdm', configuration: 'testArtifacts')

    testRuntime libraries["jaxen"]
    testCompile libraries["jdom2"]
    testCompile libraries["commons-io"]
    testCompile libraries["joda-time"]
    testCompile libraries["httpcore"]
    testCompile libraries["httpclient"]

    testCompile libraries["com.eclipsesource.restfuse"]

    testRuntime libraries["slf4j-jdk14"]
}

//ext {
//    tomcatStopPort = 8081
//    tomcatStopKey = 'stopKey'
//}
//
////task integrationTomcatRun(type: com.bmuschko.gradle.tomcat.tasks.TomcatRun) {
//tomcatRun {
//    stopPort = tomcatStopPort
//    stopKey = tomcatStopKey
//    daemon = true
//}
//
////task integrationTomcatStop(type: com.bmuschko.gradle.tomcat.tasks.TomcatStop) {
//tomcatStop {
//    stopPort = tomcatStopPort
//    stopKey = tomcatStopKey
//}
//
//task integrationTest(type: Test) {
//    include 'thredds/server/catalog/TestTdsLocal.class'
////    dependsOn integrationTomcatRun
//    dependsOn tomcatRun
////    finalizedBy integrationTomcatStop
//    finalizedBy tomcatStop
//    shouldRunAfter test
//
//    doFirst {
//        "Before integ test"
//    }
//    doLast {
//        "After integ test"
//    }
//}
//
//check.dependsOn integrationTest
//
//test {
//    exclude 'thredds/server/catalog/TestTdsLocal.class'
//}

sourceSets {
    integrationTest {
        java {
            include 'thredds/server/catalog/TestTdsLocal.java'
        }
    }
}
