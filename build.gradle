subprojects {
    apply plugin: 'java'

    sourceCompatibility = 1.7
    targetCompatibility = 1.7
    version = '4.5.4'

    compileJava.options.encoding = 'UTF-8'

    // Unlike Maven, Gradle places CLASS files and resources in different directories by default.
    // This is a problem for IntelliJ: when running an application from the IDE, it expects everything to be in the
    // same directory. To fix, we're configuring resources to be copied to the same directory as CLASS files.
    processResources.destinationDir = compileJava.destinationDir

    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "https://artifacts.unidata.ucar.edu/content/repositories/unidata"
        }
        maven {
            url "https://artifacts.unidata.ucar.edu/content/repositories/unidata-3rdparty/"
        }
    }

    ext {
        visadVersion = '2.0-20130124'
        eduWiscVersion = '2011-08-22'
        ncwmsVersion = '1.2.tds.4.5.4-SNAPSHOT'
        edsThreddsIsoVersion = '2.2.4-SNAPSHOT'
        atgTaglibJsonVersion = '0.4.1'
        casVersion = '3.1.10'
        cglibVersion = '2.2'
        guavaVersion = '17.0'
        protobufVersion = '2.5.0'
        comJgoodiesVersion = '1.6.0'
        comSleepycatVersion = '4.0.92'
        commonsDbcpVersion = '1.4'
        commonsFileuploadVersion = '1.2.2'
        commonsLang3Version = '3.3.2'
        httpclientVersion = '4.2.6'
        httpcoreVersion = '4.2.5'
        httpmimeVersion = '4.2.6'
        commonsCliVersion = '1.2'
        commonsIoVersion = '2.4'
        commonsCompressVersion = '1.8.1'
        derbyVersion = '10.9.1.0'
        javaxActivationVersion = '1.1.1'
        servletVersion = '3.1.0'
        servletJstlVersion = '1.2'
        jaxenVersion = '1.1.4'
        orgJfreeJcommonVersion = '1.0.23'
        orgJfreeJfreechartVersion = '1.0.19'
        jodaTimeVersion = '2.2'
        junitVersion = '4.12'
        log4jVersion = '2.0-rc1'
        netJcipVersion = '1.0'
        netSfEhcacheVersion = '2.6.2'
        javaxValidationVersion = '1.0.0.GA'
        orgHibernateVersion = '4.3.1.Final'
        orgJsoupVersion = '1.7.2'
        orgJdom2Version = '2.0.4'
        orgJdomLegacyVersion = '1.1.3'
        orgQuartzSchedulerVersion = '2.2.0'
        slf4jVersion = '1.7.7'
        springVersion = '3.2.12.RELEASE'
        springSecurityVersion = '3.2.5.RELEASE'
        coverityEscapersVersion = '1.1.1'
        httpunitVersion = '1.7'
        bounceVersion = '0.14'
        imgscalrLibVersion = '4.2'
        orgN52WaterMLVersion = '1.1.5'
        orgN52XmlbeansVersion = '1.12'
        oroVersion = '2.0.8'
        taglibsVersion = '1.1.2'
        jnaVersion = '4.1.0'
        eduUcarJj2000Version = '5.2'
        orgItadakiBzip2Version = '0.9.1'
        orgTukaaniXzVersion = '1.0'
        jcommanderVersion = '1.35'
    }

    buildscript {
        repositories {
            jcenter()
        }
        dependencies {
            classpath 'com.github.jengelman.gradle.plugins:shadow:0.8'
        }
    }

    jar {
        manifest {
            attributes 'Implementation-Version': version,
                    'Implementation-Vendor': 'UCAR/Unidata',
                    'Implementation-Vendor-Id': 'edu.ucar',
                    'Built-On': new Date(),
                    'Build-Jdk': System.properties['java.version'],
                    'Codebase': 'http://www.unidata.ucar.edu/software/thredds/',
                    'Permissions': 'all-permissions',
                    'Trusted-Only': 'true'
        }
    }

    dependencies {
        // testCompile project(':cdm').sourceSets.test.classes
        testCompile group: 'junit', name: 'junit', version: junitVersion
    }

    javadoc {
        options.encoding = 'UTF-8'
        // See http://blog.joda.org/2014/02/turning-off-doclint-in-jdk-8-javadoc.html
        options.addStringOption('Xdoclint:none', '-quiet')
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.1'
}
