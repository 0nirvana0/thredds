<html>
<head>
<title>GRIB Tables</title>
<style type="text/css">
pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
code {font-size: 11pt;}
dl {margin: 10px 5px 5px 15px;)
.style1 {font-style: italic}
.style1 {font-weight: bold}
</style>
</head>

<body>
<h1> GRIB Tables</h1>
<p>The following assumes that you want generic software like the netCDF-Java library to be able to correctly read the GRIB files that you write, or need to read.</p>
<h2>Writing Grib-1</h2>
<h3><strong>Encoding the center (octet 5) and subcenter id</strong> (octet 26)</h3>
<p>You must encode a center and subcenter id, in order for software to correctly match the tables used. If there is no subcenter in use,  use id =0 (&quot;no subcenter:), although 255 (&quot;missing&quot;) is acceptable but ambiguous. </p>
<h3><strong>Encoding the version number (octet 4)</strong></h3>
<p>If you are only using WMO standard tables (all parameter ids &lt; 128) then you should use version number = 1, 2, or 3, corresponding to the WMO standard table version.  The <a href="ftp://www.wmo.int/Documents/MediaPublic/Publications/CodesManual_WMO_no_306/WMO306_Vol_I.2_2010_en.pdf">Current WMO GRIB-1 table version</a> is 3. Using only parameters from the standard tables is best practice for the <em>international exchange</em> of GRIB messages.</p>
<p>If you are using non-standard (aka <em>local</em>) parameters, then you should use a version number in the range 128-254.</p>
<h3><strong>Using local tables</strong></h3>
<p>If you  use local parameters, you must do the following:</p>
<ol>
  <li>You must own the center id, or own a subcenter id within the center, so that you can version your tables.</li>
  <li>You must correctly version your local table number. If your local table changes in a way that is not backwards compatible, you must change the version number. </li>
  <li>You must publish your local tables at some authoritative place, in a machine readable format. You must mantain these indefinitely. </li>
  <li>You must put the correct center, subcenter and version number into each GRIB message.</li>
</ol>
<p>Best practice for local table use includes the following:</p>
<ol>
  <li>Use a version number between 128-254.</li>
  <li>Do not override any entries in the WMO standard tables, ie, with parameter numbers less than 128.</li>
  <li>There are no standards for publishing your tables, but any fixed column ASCII, CSV, or XML format is ok. Follow the <a href="http://dss.ucar.edu/metadata/ParameterTables/WMO_GRIB1.xml">NCAR DSS format</a> if you like. Do not use HTML, PDF, MS Word etc, since these are not machine readable formats.</li>
  <li>We need to be able to find your tables. Add enough metadata so that a google search on &quot;&lt;your center name&gt; GRIB tables&quot; finds you within the first 2 pages. Send a link to netcdf-java@unidata.ucar.edu and we will link to you.</li>
</ol>
<p>&nbsp;</p>
<h2>Reading Grib-1 files with the CDM library version 4.3</h2>
<h3>Standard table mapping</h3>
<ol>
  <li>See <em>resources/grib1/grib1Tables.txt </em>in<strong> grib-version.jar</strong> or <em>grib/src/main/resources/resources/grib1/grib1Tables.txt</em> from the source tree.</li>
  <li>You can view the standard tables in ToolsUI, using the <strong>iosp/GRIBold/GRIB1-TABLES</strong> tab.</li>
  <li>The table that matches the center-subcenter-version is used. </li>
  <li>Use a &quot;-1&quot; for the subcenter or version in order to match any. The order of the entries in the <em>grib1Tables.txt</em> file is therefore important.</li>
  <li>If a table is not matched, the file will fail to open. You can change that in the <a href="RuntimeLoading.html#XML">RunTime configuration file</a> by adding<a name="strict"></a> 
    <blockquote>
      <pre>&lt;grib1Table strict=&quot;false&quot;/&gt;</pre>
    </blockquote>
  In this case, the default WMO table will be used, but there's no way of knowing if the parameters are correctly named.</li>
</ol>
<h3>Adding to the standard table mapping</h3>
<ol>
  <li>You can add your own table within your application, or to applications that support the <a href="RuntimeLoading.html#XML">RunTime configuration file</a>.</li>
  <li>Tables that are user-added take precedence over the standard tables.</li>
  <li>Parameters that are not present in your table are taken from the default WMO table, if they exist.</li>
  <li>Missing parameters are marked &quot;unknown&quot; in the variable name and units.</li>
</ol>
<h2>&nbsp;</h2>
<h2>Table Registry</h2>
<p>In principle, if everything is done right, the reader ends up using the table that the writer used. In practice, there are many ways for that to fail. In order to increase the reliability of table-based file formats, I have <a href="http://www.unidata.ucar.edu/blogs/developer/en/entry/on_the_suitability_of_grib">proposed</a> a web registry of tables, which would create a unique id for each registered table. The writer would then embed the id into the GRIB or BUFR message (possibly in the &quot;local use&quot; section of GRIB-2, or  GRIB-1 octets &gt; 41 in PDS), and the reader could use the id to unambiguously retrieve the table from the web registry. Stay tuned for further details and a trial implementation.</p>
<hr WIDTH="100%">
<address>
<img src="../nc.gif" alt="" width="64" height="64"> This document is maintained by <a href="mailto:caron@unidata.ucar.edu">John Caron</a> and was last updated August 2011
</address>
</body>
</html>


