<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CDM DateTime</title>
<style type="text/css">
pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
code {font-size: 11pt;}
dl {margin: 10px 5px 5px 15px;)
.style1 {font-style: italic}
</style>
</head>

<body>
<h1>CDM DateTime Handling </h1>
<p>As of CDM version 4.3, DateTimes are no longer handled by the udunits library. This allows handling <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.5/cf-conventions.html#calendar">non-standard Calendars</a>. Note that for all dimensional units, including time, the udunits package is still used. This change only affects Calendar dates, aka <em><strong>DateTime</strong></em>.</p>
<h3>CDM udunit date  grammer</h3>
<p>udunit date grammer has always been a bit fuzzy. This tries to formally specify a valid CDM udunit date grammer:</p>
<pre>udunitDate = [value] period since date


period = &quot;millisec&quot; | &quot;msec&quot; | &quot;second&quot; | &quot;sec&quot; | &quot;s&quot; | &quot;minute&quot; | &quot;min&quot; | &quot;hour&quot; | &quot;hr&quot; | &quot;day&quot; | &quot;week&quot; | &quot;month&quot; | &quot;year&quot; | 
         &quot;millisecs&quot; |&quot;msecs&quot; | &quot;seconds&quot; | &quot;secs&quot; | &quot;minutes&quot; | &quot;mins&quot; | &quot;hours&quot; | &quot;hrs&quot; | &quot;days&quot; | &quot;weeks&quot; | &quot;months&quot; | &quot;years&quot; </pre>
<p>where</p>
<ul><li>msec = milli seconds  (10^-3 secs)</li>
</ul>
<p>udunits defines these periods as fixed multiples of seconds. the non-obvious ones are:</p>
<ul>
  <li>day = 86400.0 seconds</li>
  <li>week = 7 days = 604800.0 seconds</li>
  <li>month = year/12 = 2629743.831225 seconds</li>
  <li>year =  3.15569259747E7 seconds</li>
</ul>
<p>the udunit package has some other periods that are no longer supported by CDM  udunit date, such as &quot;sidereal day&quot;, &quot;lunar month&quot;, &quot;fortnight&quot;, &quot;eon&quot;, etc. We are not supporting these because we think they are not used, but contact us if you are using these with some reason.</p>
<h3>CDM ISO-8601 Strings</h3>
<p> This will parse the string produced by <a href="../../javax/time/Instant.html#toString()">toString()</a> which is the ISO-8601 format yyyy-MM-ddTHH:mm:ss.SSSSSSSSSZ. The numbers must be ASCII numerals. The seconds are mandatory, but the fractional seconds are optional. There must be no more than 9 digits after the decimal point. The letters (T and Z) will be accepted in upper or lower case. The decimal point may be either a dot or a comma. </p>
<h3></h3>
<p>Problem</p>
<pre> 0 months since 1930-01-01 == 1930-01-01T00:00:00Z
 1 months since 1930-01-01 == 1930-01-31T10:29:03Z
 2 months since 1930-01-01 == 1930-03-02T20:58:07Z
 3 months since 1930-01-01 == 1930-04-02T07:27:11Z
 4 months since 1930-01-01 == 1930-05-02T17:56:15Z
 5 months since 1930-01-01 == 1930-06-02T04:25:19Z
 6 months since 1930-01-01 == 1930-07-02T14:54:22Z
 7 months since 1930-01-01 == 1930-08-02T01:23:26Z
 8 months since 1930-01-01 == 1930-09-01T11:52:30Z
 9 months since 1930-01-01 == 1930-10-01T22:21:34Z
10 months since 1930-01-01 == 1930-11-01T08:50:38Z
11 months since 1930-01-01 == 1930-12-01T19:19:42Z</pre>
<pre>
 0 years since 1850-01-01 == 1850-01-01T00:00:00Z
10 years since 1850-01-01 == 1860-01-01T10:07:39Z
20 years since 1850-01-01 == 1869-12-31T20:15:19Z
30 years since 1850-01-01 == 1880-01-01T06:22:59Z
40 years since 1850-01-01 == 1889-12-31T16:30:38Z
50 years since 1850-01-01 == 1900-01-01T02:38:18Z
60 years since 1850-01-01 == 1910-01-01T12:45:58Z
70 years since 1850-01-01 == 1920-01-01T22:53:38Z
80 years since 1850-01-01 == 1930-01-01T09:01:17Z
90 years since 1850-01-01 == 1940-01-01T19:08:57Z</pre>
<p>&nbsp;</p>
</body>
</html>
