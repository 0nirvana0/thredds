<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  

  <title>THREDDS and Metadata</title><style type="text/css">
  pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
  code {font-size: 11pt;}
  dl {margin: 10px 5px 5px 15px;}
  </style></head>
<body>
<h1><img alt="THREDDS" src="../../images/THREDDSlogo.jpg" height="54" width="67">THREDDS and Metadata</h1>
<hr style="width: 100%; height: 2px;">
<h2>Metadata Tour on&nbsp;Several TDS Sites</h2>
<ul>
  <li>NOAA NCDC NOMADS - <a href="http://nomads.ncdc.noaa.gov/thredds/catalog.xml">http://nomads.ncdc.noaa.gov/thredds/catalog.xml</a></li>
  <ul>
    <li><a href="http://nomads.ncdc.noaa.gov/thredds/catalog/narr/catalog.xml">NARR</a>&nbsp;- <a href="http://nomads.ncdc.noaa.gov/thredds/catalog/narr/200810/20081028/catalog.xml">2008-10-28</a></li>
  </ul>
  <li>NOAA Pacific Fisheries Environmtne LabL - <a href="http://oceanwatch.pfeg.noaa.gov/thredds/catalog.xml">http://oceanwatch.pfeg.noaa.gov/thredds/catalog.xml</a></li>
  <ul>
    <li><a href="http://oceanwatch.pfeg.noaa.gov/thredds/PaCOOS/CalCOFI/catalog.xml">PaCOOS/CalCOFI</a></li>
  </ul>
  <li>USGS Woods Hole Science Center - <a href="http://coast-enviro.er.usgs.gov/thredds/catalog.xml">http://coast-enviro.er.usgs.gov/thredds/catalog.xml</a></li>
  <ul>
    <li><a href="http://coast-enviro.er.usgs.gov/thredds/adria_catalog.xml">Adriatic Sea Project</a>&nbsp;</li><li><a href="http://coast-enviro.er.usgs.gov/thredds/bathy_catalog.xml">Bathymetry</a></li>
  </ul>
  <li>Unidata IDD Real-time Archive - <a href="http://motherlode.ucar.edu:8080/thredds/catalog.xml">http://motherlode.ucar.edu:8080/thredds/catalog.xml</a></li>
  <ul>
    <li><a href="http://motherlode.ucar.edu:8080/thredds/catalog/fmrc/NCEP/GFS/CONUS_191km/files/catalog.xml">NCEP GFS CONUS 191km</a></li>
  </ul>
</ul>

<hr style="width: 100%; height: 2px;"><h2>THREDDS Metadata</h2>
<ul>
  <li><a href="EnhancedCatalogs.html">THREDDS Metadata example</a></li>
  <li><a href="../../catalog/v1.0.2/InvCatalogSpec.html">THREDDS Catalog specification</a>
    - <a href="../../catalog/v1.0.2/InvCatalogSpec.html#threddsMetadataGroup">Metadata Section</a>
  </li>
</ul>


<hr style="width: 100%; height: 2px;">
<h2>Exercise: Add Metadata to NAM, FSL, MODIS, or Suomi data</h2>
<ol>
  <li>Edit the main TDS configuration catalog as desired:
    <pre style="margin-left: 40px;"><strong>-bash-3.2$</strong> cd ${tomcat_home}/content/thredds<br><strong>-bash-3.2$</strong> vi catalog.xml                     <var>// Use the editor of your choice</var></pre>
  </li>
  <li>Add metadata to one or more of the <code>datasetScan</code> elements. Perhaps some items similar to the following:
    <pre style="margin-left: 40px;">&lt;metadata xlink:title="some XML metadata"<br>          xlink:href="http://motherlode.ucar.edu:8080/thredds/catalog.xml" /&gt;<br>&lt;documentation xlink:title="some html info" xlink:href="http://motherlode.ucar.edu:8080/thredds/catalog.html" /&gt;<br>&lt;keyword&gt;good stuff&lt;/keyword&gt;<br>&lt;publisher&gt;&lt;name&gt;you&lt;/name&gt;&lt;/publisher&gt;<br>&lt;variables&gt;<br>    &lt;variable name="Z" units="gp m"&gt;Geopotential Height&lt;/variable&gt;<br>&lt;/variables&gt;</pre>
  </li>
  <li>Restart Tomcat so the TDS is reinitialized:
<pre>
<strong>-bash-3.2$</strong> cd ${tomcat_home}/bin
<strong>-bash-3.2$</strong> ./shutdown.sh
<strong>-bash-3.2$</strong> ./startup.sh
</pre>
  </li>
  <li>Check the catalogInit.log&nbsp;-&nbsp;<a href="http://localhost:8080/thredds/admin/debug">http://localhost:8080/thredds/admin/debug</a>  </li>
  <li>Check the list of dataset roots -&nbsp;<a href="http://localhost:8080/thredds/admin/debug">http://localhost:8080/thredds/admin/debug</a>  </li>
  <li>Browse the catalogs to see how&nbsp;the metadata looks - <code><a href="http://localhost:8080/thredds/catalog.html">http://localhost:8080/thredds/catalog.html</a></code>  </li>
</ol>

<h2>THREDDS Metadata</h2>
<h3>Linking to&nbsp;Metadata</h3>
<pre style="margin-left: 40px;">&lt;metadata xlink:title="some good metadata" xlink:href="http://my.server/md/data1.xml" /&gt;</pre>
<h3>Linking to Human Readable Metadata</h3>
<pre style="margin-left: 40px;">&lt;description xlink:title="My Data" xlink:href="http://my.server/md/data1.html" /&gt;</pre>
<h3>More dataset information</h3>
<p>There's a lot of other information that can be optionally added that helps 
  applications and digital libraries know how to "do the right thing" 
  with the dataset. The<strong> collectionType</strong> attribute is used on collection 
  datasets. The <strong>dataType</strong> is a simple classification (eg <em>Image</em>, <em>Grid</em>, <em>Point</em> data, etc). The <strong>dataFormatType</strong> describes what format the data is stored in (eg <em>NetCDF</em>, <em>HDF5</em>, 
  etc) used by a file transfer protocol like FTP. The combination of the naming <strong>authority</strong> and the <strong>ID</strong> attribute should form 
  a globally unglue identifier for a dataset.</p>
<pre>&lt;dataset name="SAGE III Ozone Loss Experiment" <strong>collectionType="TimeSeries"</strong>&gt;<br>  &lt;dataset name="January Averages" serviceName="aggServer" urlPath="sage/avg/jan.nc" <strong>authority="unidata.ucar.edu" ID="sage-20938483"</strong>&gt;<br>	 <strong>&lt;dataType&gt;Trajectory&lt;/dataType&gt;<br>	 &lt;dataFormatType&gt;NetCDF&lt;/dataFormatType&gt;</strong>
  &lt;/dataset&gt;
&lt;/dataset&gt;</pre>
<p>The <strong>harvest</strong> attribute indicates that the dataset is at the 
  right level of granularity to be exported to search systems like Digital Libraries. 
  Elements such as <strong>summary</strong>, <strong>rights</strong>, <strong>publisher </strong>are needed in order to create valid entries for these services. For 
  more details, see <a href="DL.html">Exporting THREDDS Datasets to Digital Libraries.</a> Also see the <a href="InvCatalogSpec.html">Catalog Specification</a> as a complete reference.</p>
<pre>&lt;dataset name="SAGE III Ozone Loss Experiment" <strong>harvest="true"</strong>&gt;<br>  &lt;<strong>contributor</strong> role="data manager"&gt;John Smith&lt;/contributor&gt;<br>  &lt;<strong>keyword</strong>&gt;Atmospheric Chemistry&lt;/keyword&gt;<br>  &lt;<strong>publisher</strong>&gt;<br>    &lt;name vocabulary="DIF"&gt;Community Data Portal, National Center for Atmospheric Research, University Corporation for Atmospheric Research&lt;/long_name&gt;<br>    &lt;contact url="http://dataportal.ucar.edu" email="cdp@ucar.edu"/&gt;<br>  &lt;/<strong>publisher</strong>&gt;<br>&lt;/dataset&gt;</pre>
<h3>Factoring out information</h3>
<p>Rather than declare the same information on each dataset, you can use the <em>metadata</em> element to factor out common information.:</p>
<pre>&lt;dataset name="SAGE III Ozone Loss Experiment" &gt;<br><br>1<strong> &lt;metadata inherit="true"&gt;<br></strong>2   &lt;serviceName&gt;aggServer&lt;/serviceName&gt;<br>2   &lt;dataType&gt;Trajectory&lt;/dataType&gt;<br>2   &lt;dataFormatType&gt;NetCDF&lt;/dataFormatType&gt;<br>2   &lt;authority&gt;unidata.ucar.edu&lt;/authority&gt;<br><strong>  &lt;/metadata&gt;</strong>

3 &lt;dataset name="January Averages" urlPath="sage/avg/jan.nc" ID="sage-23487382"/&gt;
3 &lt;dataset name="February Averages" urlPath="sage/avg/feb.nc" ID="sage-63656446"/&gt;
4 &lt;dataset name="Global Averages" urlPath="sage/global.nc" ID="sage-7869700g" <strong>dataType="Grid"</strong>/&gt;<br><br>&lt;/dataset&gt;<br>
</pre>
<ol>
  <li> The <em>metadata</em> element with<em> inherit=true </em>implies that all 
    the information inside the metadata element applies to the current dataset 
    and all nested datasets.</li>
  <li>The <em>serviceName, dataType, dataFormatType </em> and <em>authority</em> are declared as elements.</li>
  <li>These datasets now use the <em>serviceName, dataType, dataFormatType </em> and <em>authority</em> values declared in the parent dataset.</li>
  <li>This dataset uses the <em>serviceName, dataFormatType </em> and <em>authority</em> values and overrides the <em>dataType</em>.</li>
</ol>
<p>&nbsp;</p>
<hr width="100%">
<address><img alt="THREDDS" src="../../images/thread.png" height="108" width="110">This document is maintained by Unidata staff.
    Please send comments to <a href="mailto:support-thredds@unidata.ucar.edu">THREDDS support</a>.
</address>


</body></html>